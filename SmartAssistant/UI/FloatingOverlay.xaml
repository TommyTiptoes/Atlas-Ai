<Window x:Class="MinimalApp.SmartAssistant.UI.FloatingOverlay"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Atlas Quick Access"
        Width="500" Height="60"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        Topmost="True"
        ShowInTaskbar="False"
        ResizeMode="NoResize"
        WindowStartupLocation="Manual">
    
    <Window.Resources>
        <Style x:Key="CommandTextBoxStyle" TargetType="TextBox">
            <Setter Property="Background" Value="#1E1E1E"/>
            <Setter Property="Foreground" Value="#E0E0E0"/>
            <Setter Property="BorderBrush" Value="#3D3D3D"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="12,8"/>
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="CaretBrush" Value="#10B981"/>
        </Style>
    </Window.Resources>
    
    <Border Background="#1E1E1E" 
            CornerRadius="12" 
            BorderBrush="#3D3D3D" 
            BorderThickness="1"
            Margin="10">
        <Border.Effect>
            <DropShadowEffect BlurRadius="20" ShadowDepth="0" Opacity="0.5" Color="Black"/>
        </Border.Effect>
        
        <Grid Margin="8">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            
            <!-- Atlas Icon -->
            <Border Grid.Column="0" 
                    Width="36" Height="36" 
                    CornerRadius="18" 
                    Background="#10B981"
                    Margin="0,0,10,0">
                <TextBlock Text="A" 
                           FontSize="18" 
                           FontWeight="Bold" 
                           Foreground="White"
                           HorizontalAlignment="Center" 
                           VerticalAlignment="Center"/>
            </Border>
            
            <!-- Command Input -->
            <TextBox x:Name="CommandInput"
                     Grid.Column="1"
                     Style="{StaticResource CommandTextBoxStyle}"
                     VerticalAlignment="Center"
                     KeyDown="CommandInput_KeyDown"
                     GotFocus="CommandInput_GotFocus"
                     LostFocus="CommandInput_LostFocus">
                <TextBox.Template>
                    <ControlTemplate TargetType="TextBox">
                        <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="8">
                            <Grid>
                                <TextBlock x:Name="Placeholder"
                                           Text="Ask Atlas anything... (Esc to close)"
                                           Foreground="#6B7280"
                                           Padding="{TemplateBinding Padding}"
                                           VerticalAlignment="Center"
                                           Visibility="Collapsed"/>
                                <ScrollViewer x:Name="PART_ContentHost" 
                                              VerticalAlignment="Center"/>
                            </Grid>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="Text" Value="">
                                <Setter TargetName="Placeholder" Property="Visibility" Value="Visible"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </TextBox.Template>
            </TextBox>
            
            <!-- Voice Button -->
            <Button x:Name="VoiceButton"
                    Grid.Column="2"
                    Width="36" Height="36"
                    Margin="10,0,0,0"
                    Background="Transparent"
                    BorderThickness="0"
                    Cursor="Hand"
                    Click="VoiceButton_Click"
                    ToolTip="Voice input">
                <Path Data="M12,2A3,3 0 0,1 15,5V11A3,3 0 0,1 12,14A3,3 0 0,1 9,11V5A3,3 0 0,1 12,2M19,11C19,14.53 16.39,17.44 13,17.93V21H11V17.93C7.61,17.44 5,14.53 5,11H7A5,5 0 0,0 12,16A5,5 0 0,0 17,11H19Z"
                      Fill="#6B7280"
                      Stretch="Uniform"
                      Width="20" Height="20"/>
            </Button>
        </Grid>
    </Border>
</Window>
