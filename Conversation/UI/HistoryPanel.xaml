<UserControl x:Class="MinimalApp.Conversation.UI.HistoryPanel"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             Background="#0d1117">
    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        
        <!-- Header -->
        <Border Grid.Row="0" Padding="16,12" Background="#161b22">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <TextBlock Text="Chat History" FontSize="16" FontWeight="SemiBold" 
                           Foreground="#e6edf3" VerticalAlignment="Center"/>
                
                <Button x:Name="NewChatButton" Grid.Column="1" Content="+ New Chat" 
                        Click="NewChat_Click" Cursor="Hand" Padding="12,6"
                        Background="#00d4aa" Foreground="#0d1117" BorderThickness="0"
                        FontSize="12" FontWeight="Medium">
                    <Button.Template>
                        <ControlTemplate TargetType="Button">
                            <Border x:Name="bd" Background="{TemplateBinding Background}" 
                                    CornerRadius="6" Padding="{TemplateBinding Padding}">
                                <ContentPresenter HorizontalAlignment="Center"/>
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter TargetName="bd" Property="Effect">
                                        <Setter.Value>
                                            <DropShadowEffect Color="#00d4aa" BlurRadius="8" ShadowDepth="0" Opacity="0.4"/>
                                        </Setter.Value>
                                    </Setter>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Button.Template>
                </Button>
            </Grid>
        </Border>
        
        <!-- Search -->
        <Border Grid.Row="1" Padding="16,8" Background="#0d1117">
            <Border Background="#21262d" CornerRadius="8" Padding="10,8">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    
                    <TextBlock Text="ðŸ”" FontSize="14" Foreground="#6e7681" 
                               VerticalAlignment="Center" Margin="0,0,8,0"/>
                    
                    <TextBox x:Name="SearchBox" Grid.Column="1" 
                             Background="Transparent" Foreground="#e6edf3"
                             BorderThickness="0" FontSize="13" VerticalAlignment="Center"
                             TextChanged="SearchBox_TextChanged" CaretBrush="#00d4aa">
                        <TextBox.Style>
                            <Style TargetType="TextBox">
                                <Style.Triggers>
                                    <Trigger Property="Text" Value="">
                                        <Setter Property="Background">
                                            <Setter.Value>
                                                <VisualBrush Stretch="None" AlignmentX="Left">
                                                    <VisualBrush.Visual>
                                                        <TextBlock Text="Search conversations..." 
                                                                   Foreground="#6e7681"/>
                                                    </VisualBrush.Visual>
                                                </VisualBrush>
                                            </Setter.Value>
                                        </Setter>
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                        </TextBox.Style>
                    </TextBox>
                </Grid>
            </Border>
        </Border>
        
        <!-- Session List -->
        <ScrollViewer Grid.Row="2" VerticalScrollBarVisibility="Auto">
            <StackPanel x:Name="SessionsContainer" Margin="8,0,8,8"/>
        </ScrollViewer>
    </Grid>
</UserControl>
