<Window x:Class="MinimalApp.SecuritySuite.SecuritySuiteWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Atlas AI Security Agent" Height="700" Width="900"
        WindowStartupLocation="CenterScreen"
        WindowStyle="None" AllowsTransparency="True"
        Background="Transparent" ShowInTaskbar="True"
        ResizeMode="NoResize">

    <Window.Resources>
        <FontFamily x:Key="OrbitronFont">Segoe UI, Arial</FontFamily>
        <FontFamily x:Key="MonoFont">Cascadia Code, Consolas, Courier New</FontFamily>
        
        <Color x:Key="BgDeep">#0A0C14</Color>
        <Color x:Key="BgPanel">#12121A</Color>
        <Color x:Key="CyanAccent">#22D3EE</Color>
        <Color x:Key="VioletAccent">#8B5CF6</Color>
        <Color x:Key="GreenAccent">#22C55E</Color>
        <Color x:Key="GrayMuted">#6B7280</Color>
        
        <SolidColorBrush x:Key="BgDeepBrush" Color="{StaticResource BgDeep}"/>
        <SolidColorBrush x:Key="BgPanelBrush" Color="{StaticResource BgPanel}"/>
        <SolidColorBrush x:Key="CyanBrush" Color="{StaticResource CyanAccent}"/>
        <SolidColorBrush x:Key="VioletBrush" Color="{StaticResource VioletAccent}"/>
        <SolidColorBrush x:Key="GreenBrush" Color="{StaticResource GreenAccent}"/>
        <SolidColorBrush x:Key="GrayBrush" Color="{StaticResource GrayMuted}"/>
    </Window.Resources>

    <Border CornerRadius="16" Background="{StaticResource BgDeepBrush}" BorderThickness="1" BorderBrush="#4D22D3EE">
        <Border.Effect>
            <DropShadowEffect Color="#22D3EE" BlurRadius="60" ShadowDepth="0" Opacity="0.3"/>
        </Border.Effect>
        
        <Grid>
            <!-- Scanlines overlay -->
            <Rectangle Opacity="0.03" IsHitTestVisible="False">
                <Rectangle.Fill>
                    <DrawingBrush TileMode="Tile" Viewport="0,0,4,4" ViewportUnits="Absolute">
                        <DrawingBrush.Drawing>
                            <GeometryDrawing Brush="#2022D3EE">
                                <GeometryDrawing.Geometry>
                                    <RectangleGeometry Rect="0,2,4,2"/>
                                </GeometryDrawing.Geometry>
                            </GeometryDrawing>
                        </DrawingBrush.Drawing>
                    </DrawingBrush>
                </Rectangle.Fill>
            </Rectangle>

            <DockPanel>
                <!-- Header Bar -->
                <Border DockPanel.Dock="Top" Height="60" Background="#CC0A0C14" 
                        BorderBrush="#4D22D3EE" BorderThickness="0,0,0,1" MouseLeftButtonDown="TitleBar_MouseDown">
                    <Grid Margin="24,0">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        
                        <StackPanel Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Center">
                            <TextBlock Text="◆" Foreground="{StaticResource CyanBrush}" FontSize="12" VerticalAlignment="Center" Margin="0,0,12,0"/>
                            <TextBlock Text="ATLAS AI SECURITY AGENT" Foreground="{StaticResource CyanBrush}" 
                                       FontFamily="{StaticResource OrbitronFont}" FontSize="16" FontWeight="SemiBold" 
                                       VerticalAlignment="Center" Margin="0,0,0,0"/>
                            <TextBlock Text="◆" Foreground="{StaticResource CyanBrush}" FontSize="12" VerticalAlignment="Center" Margin="12,0,0,0"/>
                        </StackPanel>
                        
                        <StackPanel Grid.Column="2" Orientation="Horizontal" VerticalAlignment="Center">
                            <!-- Run Scan Button -->
                            <Button x:Name="RunScanBtn" Click="RunScan_Click" Margin="0,0,16,0" Cursor="Hand"
                                    Background="#1A22D3EE" BorderBrush="#4D22D3EE" BorderThickness="1">
                                <Button.Template>
                                    <ControlTemplate TargetType="Button">
                                        <Border x:Name="border" Background="{TemplateBinding Background}" 
                                                BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="1" 
                                                CornerRadius="6" Padding="16,8">
                                            <StackPanel Orientation="Horizontal">
                                                <TextBlock Text="▶" Foreground="{StaticResource CyanBrush}" FontSize="10" Margin="0,0,8,0"/>
                                                <TextBlock x:Name="ScanBtnText" Text="RUN SCAN" Foreground="{StaticResource CyanBrush}" 
                                                           FontFamily="{StaticResource MonoFont}" FontSize="11" FontWeight="SemiBold"/>
                                            </StackPanel>
                                        </Border>
                                        <ControlTemplate.Triggers>
                                            <Trigger Property="IsMouseOver" Value="True">
                                                <Setter TargetName="border" Property="Background" Value="#3322D3EE"/>
                                            </Trigger>
                                        </ControlTemplate.Triggers>
                                    </ControlTemplate>
                                </Button.Template>
                            </Button>
                            
                            <StackPanel x:Name="AnimatedDots" Orientation="Horizontal" Margin="0,0,16,0">
                                <Ellipse x:Name="Dot1" Width="8" Height="8" Fill="{StaticResource CyanBrush}" Margin="0,0,8,0"/>
                                <Ellipse x:Name="Dot2" Width="8" Height="8" Fill="{StaticResource CyanBrush}" Margin="0,0,8,0"/>
                                <Ellipse x:Name="Dot3" Width="8" Height="8" Fill="{StaticResource CyanBrush}"/>
                            </StackPanel>
                            
                            <Border Background="#1A22C55E" BorderBrush="#4D22C55E" BorderThickness="1" 
                                    CornerRadius="12" Padding="12,6" Margin="0,0,16,0">
                                <StackPanel Orientation="Horizontal">
                                    <Ellipse Width="6" Height="6" Fill="{StaticResource GreenBrush}" Margin="0,0,8,0"/>
                                    <TextBlock x:Name="ThreatLevel" Text="THREAT_LEVEL: 0x00" Foreground="{StaticResource GreenBrush}"
                                               FontFamily="{StaticResource MonoFont}" FontSize="10"/>
                                </StackPanel>
                            </Border>
                            
                            <Button x:Name="CloseBtn" Click="Close_Click" Width="32" Height="32" 
                                    Background="Transparent" BorderBrush="#6622D3EE" BorderThickness="1" Cursor="Hand">
                                <Button.Template>
                                    <ControlTemplate TargetType="Button">
                                        <Border x:Name="border" Background="{TemplateBinding Background}" 
                                                BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="1" CornerRadius="16">
                                            <TextBlock Text="✕" Foreground="{StaticResource CyanBrush}" 
                                                       HorizontalAlignment="Center" VerticalAlignment="Center" FontSize="14"/>
                                        </Border>
                                        <ControlTemplate.Triggers>
                                            <Trigger Property="IsMouseOver" Value="True">
                                                <Setter TargetName="border" Property="Background" Value="#1A22D3EE"/>
                                                <Setter TargetName="border" Property="BorderBrush" Value="{StaticResource CyanBrush}"/>
                                            </Trigger>
                                        </ControlTemplate.Triggers>
                                    </ControlTemplate>
                                </Button.Template>
                            </Button>
                        </StackPanel>
                    </Grid>
                </Border>

                <!-- AI Decision Pipeline -->
                <Border DockPanel.Dock="Top" Margin="16,8,16,0" Background="#B312121A" 
                        BorderBrush="#3322D3EE" BorderThickness="1" CornerRadius="8" Padding="12">
                    <Grid>
                        <Border HorizontalAlignment="Left" VerticalAlignment="Top" Width="12" Height="12"
                                BorderBrush="#6622D3EE" BorderThickness="1,1,0,0"/>
                        <Border HorizontalAlignment="Right" VerticalAlignment="Top" Width="12" Height="12"
                                BorderBrush="#6622D3EE" BorderThickness="0,1,1,0"/>
                        
                        <StackPanel>
                            <TextBlock Text="AI DECISION PIPELINE" Foreground="#CC22D3EE" 
                                       FontFamily="{StaticResource OrbitronFont}" FontSize="10" Margin="0,0,0,12"/>
                            <Grid x:Name="PipelineGrid" Height="50"/>
                            <TextBlock x:Name="PipelineStatus" Text="AUTONOMOUS PROCESSING CYCLE ACTIVE" 
                                       Foreground="#B322D3EE" FontFamily="{StaticResource MonoFont}" 
                                       FontSize="9" HorizontalAlignment="Center" Margin="0,8,0,0"/>
                        </StackPanel>
                    </Grid>
                </Border>

                <!-- Status Bar (Bottom) -->
                <Border DockPanel.Dock="Bottom" Height="50" Background="#CC0A0C14" BorderBrush="#4D22D3EE" BorderThickness="0,1,0,0">
                    <Grid Margin="24,0">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        
                        <StackPanel Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Center">
                            <TextBlock x:Name="ScanStatus" Text="COGNITIVE_INTEGRITY_SCAN: ACTIVE" 
                                       Foreground="{StaticResource CyanBrush}" FontFamily="{StaticResource MonoFont}"
                                       FontSize="12" VerticalAlignment="Center"/>
                            <StackPanel x:Name="ProgressTicks" Orientation="Horizontal" Margin="16,0"/>
                            <TextBlock x:Name="HexProgress" Text="0x2F" Foreground="{StaticResource VioletBrush}"
                                       FontFamily="{StaticResource MonoFont}" FontSize="12" Margin="16,0,0,0"/>
                        </StackPanel>
                        
                        <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center">
                            <TextBlock Text="AI_HEARTBEAT" Foreground="#4D6B7280" FontSize="8" VerticalAlignment="Center" Margin="0,0,12,0"/>
                            <Canvas x:Name="HeartbeatCanvas" Width="64" Height="24"/>
                            <Ellipse x:Name="HeartbeatDot" Width="8" Height="8" Fill="{StaticResource VioletBrush}" Margin="12,0,0,0"/>
                        </StackPanel>
                    </Grid>
                </Border>

                <!-- Main Content - 3 Column Grid -->
                <Grid Margin="16,12">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="220"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="220"/>
                    </Grid.ColumnDefinitions>

                    <!-- Left Panel -->
                    <ScrollViewer Grid.Column="0" VerticalScrollBarVisibility="Auto" Margin="0,0,8,0">
                        <StackPanel>
                            <!-- Behavioral Analysis -->
                            <Border x:Name="BehavioralPanel" Background="#B312121A" BorderBrush="#3322C55E" 
                                    BorderThickness="1" CornerRadius="8" Padding="12" Margin="0,0,0,12"/>
                            <!-- System Log -->
                            <Border x:Name="SystemLogPanel" Background="#B312121A" BorderBrush="#3322D3EE" 
                                    BorderThickness="1" CornerRadius="8" Padding="12" Height="280"/>
                        </StackPanel>
                    </ScrollViewer>

                    <!-- Center: Diagnostic Scanner -->
                    <Grid Grid.Column="1">
                        <Canvas x:Name="ScannerCanvas" HorizontalAlignment="Center" VerticalAlignment="Center" Width="360" Height="360"/>
                    </Grid>

                    <!-- Right Panel -->
                    <ScrollViewer Grid.Column="2" VerticalScrollBarVisibility="Auto" Margin="8,0,0,0">
                        <StackPanel>
                            <!-- AI Accelerator / GPU -->
                            <Border x:Name="AIAcceleratorPanel" Background="#B312121A" BorderBrush="#338B5CF6" 
                                    BorderThickness="1" CornerRadius="8" Padding="12" Margin="0,0,0,12"/>
                            <!-- Trust Matrix -->
                            <Border x:Name="TrustMatrixPanel" Background="#B312121A" BorderBrush="#3322C55E" 
                                    BorderThickness="1" CornerRadius="8" Padding="12" Margin="0,0,0,12"/>
                            <!-- Status Modules -->
                            <Border x:Name="StatusModulesPanel" Background="#B312121A" BorderBrush="#3322D3EE" 
                                    BorderThickness="1" CornerRadius="8" Padding="12"/>
                        </StackPanel>
                    </ScrollViewer>
                </Grid>
            </DockPanel>
            
            <!-- Neon border glow -->
            <Border CornerRadius="16" BorderThickness="1" IsHitTestVisible="False">
                <Border.BorderBrush>
                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                        <GradientStop Color="#4D22D3EE" Offset="0"/>
                        <GradientStop Color="#4D8B5CF6" Offset="0.5"/>
                        <GradientStop Color="#4D22D3EE" Offset="1"/>
                    </LinearGradientBrush>
                </Border.BorderBrush>
            </Border>
        </Grid>
    </Border>
</Window>
