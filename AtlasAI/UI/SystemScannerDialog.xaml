<Window x:Class="MinimalApp.UI.SystemScannerDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="System Diagnostic" Height="600" Width="700"
        WindowStartupLocation="CenterOwner"
        WindowStyle="None" AllowsTransparency="True"
        Background="Transparent" ResizeMode="NoResize">
    
    <Window.Resources>
        <!-- Glow Effect -->
        <DropShadowEffect x:Key="CyanGlow" Color="#22d3ee" BlurRadius="15" ShadowDepth="0" Opacity="0.8"/>
        <DropShadowEffect x:Key="VioletGlow" Color="#8b5cf6" BlurRadius="15" ShadowDepth="0" Opacity="0.8"/>
        <DropShadowEffect x:Key="GreenGlow" Color="#22c55e" BlurRadius="15" ShadowDepth="0" Opacity="0.8"/>
        
        <!-- Rotating animation for scanner -->
        <Storyboard x:Key="ScannerRotation" RepeatBehavior="Forever">
            <DoubleAnimation Storyboard.TargetName="ScanLine" 
                             Storyboard.TargetProperty="(UIElement.RenderTransform).(RotateTransform.Angle)"
                             From="0" To="360" Duration="0:0:4"/>
        </Storyboard>
        
        <!-- Pulse animation for rings -->
        <Storyboard x:Key="RingPulse" RepeatBehavior="Forever">
            <DoubleAnimation Storyboard.TargetName="PulseRing1" 
                             Storyboard.TargetProperty="Opacity"
                             From="0.8" To="0" Duration="0:0:2"/>
            <DoubleAnimation Storyboard.TargetName="PulseRing1" 
                             Storyboard.TargetProperty="Width"
                             From="50" To="300" Duration="0:0:2"/>
            <DoubleAnimation Storyboard.TargetName="PulseRing1" 
                             Storyboard.TargetProperty="Height"
                             From="50" To="300" Duration="0:0:2"/>
        </Storyboard>
        
        <!-- Progress bar shimmer -->
        <Storyboard x:Key="ProgressShimmer" RepeatBehavior="Forever">
            <DoubleAnimation Storyboard.TargetName="ProgressShimmerRect"
                             Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.X)"
                             From="-100" To="700" Duration="0:0:2"/>
        </Storyboard>
        
        <!-- Percentage counting -->
        <Storyboard x:Key="PercentageCount">
            <Int32Animation Storyboard.TargetName="PercentText"
                            Storyboard.TargetProperty="Tag"
                            From="0" To="100" Duration="0:0:8"/>
        </Storyboard>
    </Window.Resources>
    
    <Border Background="#050810" BorderBrush="#4022d3ee" BorderThickness="1" CornerRadius="12">
        <Border.Effect>
            <DropShadowEffect Color="#22d3ee" BlurRadius="30" ShadowDepth="0" Opacity="0.3"/>
        </Border.Effect>
        
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="56"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="60"/>
            </Grid.RowDefinitions>
            
            <!-- Corner Decorations (span all rows) -->
            <Border Grid.RowSpan="3" Width="16" Height="16" BorderThickness="2,2,0,0" BorderBrush="#8022d3ee"
                    HorizontalAlignment="Left" VerticalAlignment="Top" Margin="8">
                <Ellipse Width="4" Height="4" Fill="#22d3ee" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="-2"
                         Effect="{StaticResource CyanGlow}"/>
            </Border>
            <Border Grid.RowSpan="3" Width="16" Height="16" BorderThickness="0,2,2,0" BorderBrush="#8022d3ee"
                    HorizontalAlignment="Right" VerticalAlignment="Top" Margin="8"/>
            <Border Grid.RowSpan="3" Width="16" Height="16" BorderThickness="2,0,0,2" BorderBrush="#8022d3ee"
                    HorizontalAlignment="Left" VerticalAlignment="Bottom" Margin="8"/>
            <Border Grid.RowSpan="3" Width="16" Height="16" BorderThickness="0,0,2,2" BorderBrush="#8022d3ee"
                    HorizontalAlignment="Right" VerticalAlignment="Bottom" Margin="8"/>
            
            <!-- Header -->
            <Border Grid.Row="0" Background="#100a0c14" BorderBrush="#3022d3ee" BorderThickness="0,0,0,1">
                <Grid Margin="20,0">
                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                        <TextBlock Text="â—†" Foreground="#22d3ee" FontSize="16" Margin="0,0,8,0"/>
                        <TextBlock Text="ATLAS SYSTEM DIAGNOSTIC" Foreground="#22d3ee" FontSize="14" 
                                   FontFamily="Consolas" FontWeight="SemiBold" VerticalAlignment="Center"/>
                        <TextBlock Text="â—†" Foreground="#22d3ee" FontSize="16" Margin="8,0,16,0"/>
                        
                        <!-- Pulsing dots -->
                        <Ellipse x:Name="Dot1" Width="6" Height="6" Fill="#22d3ee" Margin="2">
                            <Ellipse.Effect><DropShadowEffect Color="#22d3ee" BlurRadius="6" ShadowDepth="0"/></Ellipse.Effect>
                        </Ellipse>
                        <Ellipse x:Name="Dot2" Width="6" Height="6" Fill="#22d3ee" Margin="2" Opacity="0.5"/>
                        <Ellipse x:Name="Dot3" Width="6" Height="6" Fill="#22d3ee" Margin="2" Opacity="0.3"/>
                    </StackPanel>
                    
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Center">
                        <!-- Threat Level Badge -->
                        <Border Background="#2022c55e" BorderBrush="#4022c55e" BorderThickness="1" 
                                CornerRadius="4" Padding="10,4" Margin="0,0,16,0">
                            <Border.Effect><DropShadowEffect Color="#22c55e" BlurRadius="8" ShadowDepth="0" Opacity="0.4"/></Border.Effect>
                            <TextBlock x:Name="ThreatLevelText" Text="THREAT LEVEL: SCANNING..." 
                                       Foreground="#22c55e" FontSize="10" FontFamily="Consolas"/>
                        </Border>
                        
                        <Button Content="âœ•" Click="Close_Click" Background="Transparent" 
                                Foreground="#6022d3ee" BorderThickness="0" FontSize="14" 
                                Width="28" Height="28" Cursor="Hand"/>
                    </StackPanel>
                </Grid>
            </Border>
            
            <!-- Main Content -->
            <Grid Grid.Row="1">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="200"/>
                </Grid.ColumnDefinitions>
                
                <!-- Center Scanner -->
                <Grid Grid.Column="0" HorizontalAlignment="Center" VerticalAlignment="Center">
                    <!-- Scanner visualization will be drawn in code-behind -->
                    <Canvas x:Name="ScannerCanvas" Width="320" Height="320">
                        <!-- Concentric rings -->
                        <Ellipse Width="290" Height="290" Canvas.Left="15" Canvas.Top="15"
                                 Stroke="#3022d3ee" StrokeThickness="1" Fill="Transparent"/>
                        <Ellipse Width="240" Height="240" Canvas.Left="40" Canvas.Top="40"
                                 Stroke="#208b5cf6" StrokeThickness="1" Fill="Transparent"/>
                        <Ellipse Width="190" Height="190" Canvas.Left="65" Canvas.Top="65"
                                 Stroke="#3022d3ee" StrokeThickness="1" Fill="Transparent"/>
                        <Ellipse Width="140" Height="140" Canvas.Left="90" Canvas.Top="90"
                                 Stroke="#208b5cf6" StrokeThickness="1" Fill="Transparent"/>
                        
                        <!-- Outer glow ring -->
                        <Ellipse Width="300" Height="300" Canvas.Left="10" Canvas.Top="10"
                                 Stroke="#22d3ee" StrokeThickness="2" Fill="Transparent">
                            <Ellipse.Effect>
                                <DropShadowEffect Color="#22d3ee" BlurRadius="20" ShadowDepth="0" Opacity="0.6"/>
                            </Ellipse.Effect>
                        </Ellipse>
                        
                        <!-- Pulse ring (animated) -->
                        <Ellipse x:Name="PulseRing1" Width="50" Height="50" 
                                 Canvas.Left="135" Canvas.Top="135"
                                 Stroke="#22d3ee" StrokeThickness="2" Fill="Transparent"
                                 RenderTransformOrigin="0.5,0.5">
                            <Ellipse.RenderTransform>
                                <TranslateTransform X="0" Y="0"/>
                            </Ellipse.RenderTransform>
                        </Ellipse>
                        
                        <!-- Rotating scan line -->
                        <Line x:Name="ScanLine" X1="160" Y1="160" X2="160" Y2="20"
                              Stroke="#22d3ee" StrokeThickness="3" RenderTransformOrigin="0.5,1">
                            <Line.RenderTransform>
                                <RotateTransform Angle="0" CenterX="0" CenterY="140"/>
                            </Line.RenderTransform>
                            <Line.Effect>
                                <DropShadowEffect Color="#22d3ee" BlurRadius="10" ShadowDepth="0"/>
                            </Line.Effect>
                        </Line>
                    </Canvas>
                    
                    <!-- Center icon and percentage -->
                    <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                        <Border Width="70" Height="70" CornerRadius="35" Margin="0,0,0,10"
                                BorderBrush="#6022d3ee" BorderThickness="2">
                            <Border.Background>
                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                    <GradientStop Color="#3022d3ee" Offset="0"/>
                                    <GradientStop Color="#308b5cf6" Offset="1"/>
                                </LinearGradientBrush>
                            </Border.Background>
                            <Border.Effect>
                                <DropShadowEffect Color="#22d3ee" BlurRadius="20" ShadowDepth="0" Opacity="0.5"/>
                            </Border.Effect>
                            <TextBlock Text="ðŸ’»" FontSize="28" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        
                        <TextBlock x:Name="PercentText" Text="0%" FontSize="48" Foreground="#22d3ee" 
                                   FontFamily="Consolas" FontWeight="Bold" HorizontalAlignment="Center">
                            <TextBlock.Effect>
                                <DropShadowEffect Color="#22d3ee" BlurRadius="15" ShadowDepth="0" Opacity="0.7"/>
                            </TextBlock.Effect>
                        </TextBlock>
                        <TextBlock x:Name="StatusText" Text="INITIALIZING" FontSize="10" Foreground="#8022d3ee" 
                                   FontFamily="Consolas" HorizontalAlignment="Center" Margin="0,4,0,0"/>
                    </StackPanel>
                    
                    <!-- Corner brackets on scanner -->
                    <Border Width="40" Height="40" BorderThickness="2,2,0,0" BorderBrush="#5022d3ee"
                            HorizontalAlignment="Left" VerticalAlignment="Top" Margin="20"/>
                    <Border Width="40" Height="40" BorderThickness="0,2,2,0" BorderBrush="#5022d3ee"
                            HorizontalAlignment="Right" VerticalAlignment="Top" Margin="20"/>
                    <Border Width="40" Height="40" BorderThickness="2,0,0,2" BorderBrush="#5022d3ee"
                            HorizontalAlignment="Left" VerticalAlignment="Bottom" Margin="20"/>
                    <Border Width="40" Height="40" BorderThickness="0,0,2,2" BorderBrush="#5022d3ee"
                            HorizontalAlignment="Right" VerticalAlignment="Bottom" Margin="20"/>
                </Grid>
                
                <!-- Right Status Cards -->
                <ScrollViewer Grid.Column="1" VerticalScrollBarVisibility="Auto" 
                              Background="#100a0c14" BorderBrush="#2022d3ee" BorderThickness="1,0,0,0">
                    <StackPanel x:Name="StatusCardsPanel" Margin="12"/>
                </ScrollViewer>
            </Grid>
            
            <!-- Bottom Progress -->
            <Border Grid.Row="2" Background="#100a0c14" BorderBrush="#3022d3ee" BorderThickness="0,1,0,0">
                <Grid Margin="20,0">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    
                    <Grid Grid.Row="0" Margin="0,12,0,8">
                        <TextBlock x:Name="ProgressStatusText" Text="INITIALIZING SCAN SEQUENCE..." 
                                   Foreground="#22d3ee" FontSize="11" FontFamily="Consolas"/>
                        <TextBlock x:Name="ProgressPercentText" Text="0%" HorizontalAlignment="Right"
                                   Foreground="#6022d3ee" FontSize="11" FontFamily="Consolas"/>
                    </Grid>
                    
                    <Border Grid.Row="1" Height="8" Background="#20121a" CornerRadius="4" 
                            VerticalAlignment="Center" ClipToBounds="True">
                        <Grid>
                            <Border x:Name="ProgressFill" HorizontalAlignment="Left" Width="0"
                                    CornerRadius="4">
                                <Border.Background>
                                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                        <GradientStop Color="#22d3ee" Offset="0"/>
                                        <GradientStop Color="#8b5cf6" Offset="0.5"/>
                                        <GradientStop Color="#22d3ee" Offset="1"/>
                                    </LinearGradientBrush>
                                </Border.Background>
                                <Border.Effect>
                                    <DropShadowEffect Color="#22d3ee" BlurRadius="15" ShadowDepth="0" Opacity="0.7"/>
                                </Border.Effect>
                            </Border>
                            
                            <!-- Shimmer effect -->
                            <Rectangle x:Name="ProgressShimmerRect" Width="80"
                                       HorizontalAlignment="Left" RenderTransformOrigin="0,0.5">
                                <Rectangle.Fill>
                                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                        <GradientStop Color="Transparent" Offset="0"/>
                                        <GradientStop Color="#40ffffff" Offset="0.5"/>
                                        <GradientStop Color="Transparent" Offset="1"/>
                                    </LinearGradientBrush>
                                </Rectangle.Fill>
                                <Rectangle.RenderTransform>
                                    <TranslateTransform X="-100"/>
                                </Rectangle.RenderTransform>
                            </Rectangle>
                        </Grid>
                    </Border>
                </Grid>
            </Border>
        </Grid>
    </Border>
</Window>
